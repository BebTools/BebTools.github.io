<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Beb.Tools</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Bungee&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js"></script>
    <script src="auth.js"></script>
</head>
<body>
    <header>
        <a href="index.html" class="logo">BEB.TOOLS</a>
        <input type="text" placeholder="Search scripts..." class="search-bar" id="search-input" disabled>
        <div class="nav">
            <div class="profile-container">
                <button id="login-btn">Login with GitHub</button>
                <div id="profile-dropdown" class="dropdown" style="display: none;">
                    <button id="my-scripts-btn" class="dropdown-item">My Scripts</button>
                    <button id="logout-btn" class="dropdown-item">Logout</button>
                </div>
            </div>
            <a href="index.html">Back to Scripts</a>
        </div>
    </header>
    <main>
        <div class="portal-container">
            <h1>Creator Portal</h1>
            <div class="creator-links">
                <button id="enable-creator-links" style="display: none;">Enable Creator Links</button>
                <p id="creator-links-disclaimer" style="display: none;">This will create a "bebtools" Repo</p>
                <div id="links-form" style="display: none;">
                    <div class="link-row">
                        <label for="website-link">Website:</label>
                        <input type="text" id="website-link" placeholder="https://yourwebsite.com">
                    </div>
                    <div class="link-row">
                        <label for="x-link">X:</label>
                        <input type="text" id="x-link" placeholder="https://x.com/username">
                    </div>
                    <div class="link-row">
                        <label for="donation-link">Donation:</label>
                        <input type="text" id="donation-link" placeholder="https://paypal.me/username">
                    </div>
                    <button id="save-links">Save Links</button>
                </div>
            </div>
            <button id="refresh-repos">Refresh Repos</button>
            <div id="login-message">Please log in with GitHub to upload and manage scripts.</div>

            <div class="sections-wrapper">
                <div id="upload-section" class="section-box" style="display: none;">
                    <h2>Upload Script</h2>
                    <p class="instructions">Select a repo and drag your Blender Script, ReadMe, and Thumbnail into the boxes below.</p>
                    <form id="upload-form">
                        <div class="form-row">
                            <label for="repo-select">Select Repository:</label>
                            <select id="repo-select"></select>
                        </div>
                        <div class="form-row">
                            <label class="naming-rule" style="display: none;">Your .py, .txt, and .jpg must have the same name.</label>
                            <label for="py-file">Python Script (.py):</label>
                            <div id="py-drop-zone" class="dropzone"></div>
                            <input type="file" id="py-file" accept=".py" required>
                        </div>
                        <div class="form-row">
                            <label for="txt-file">ReadMe (.txt):</label>
                            <div id="txt-drop-zone" class="dropzone"></div>
                            <input type="file" id="txt-file" accept=".txt">
                        </div>
                        <div class="form-row">
                            <label for="jpg-file">Thumbnail (.jpg):</label>
                            <div id="jpg-drop-zone" class="dropzone"></div>
                            <input type="file" id="jpg-file" accept=".jpg" required>
                            <p class="guidelines">Recommended: 800x450px, max 100KB</p>
                        </div>
                        <div class="button-group">
                            <button type="submit">Upload Script</button>
                            <a href="https://github.com/BebTools/Beb.Tools-Scripts" target="_blank"><button type="button" class="example-btn">View Examples</button></a>
                        </div>
                    </form>
                    <div id="upload-status"></div>
                </div>

                <div id="repo-section" class="section-box" style="display: none;">
                    <h2>Manage Repositories</h2>
                    <div class="create-repo">
                        <label for="new-repo-name">Create New Repository:</label>
                        <input type="text" id="new-repo-name" placeholder="e.g., MyBebToolsRepo">
                        <button id="create-repo-btn">Create</button>
                    </div>
                    <h3>My Repos</h3>
                    <div class="scrollbox">
                        <ul id="repo-list"></ul>
                    </div>
                    <div id="repo-status"></div>
                </div>

                <div id="script-section" class="section-box" style="display: none;">
                    <h2>Manage Scripts</h2>
                    <div class="form-row">
                        <label for="script-repo-select">Select Repository:</label>
                        <select id="script-repo-select"></select>
                    </div>
                    <div class="scrollbox">
                        <ul id="script-list"></ul>
                    </div>
                    <div id="script-status"></div>
                </div>
            </div>
        </div>
    </main>
    <script src="portal.js"></script>
</body>
</html>