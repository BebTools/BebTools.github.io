<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>BEB.TOOLS - Creator Portal</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Bungee Font -->
    <link href="https://fonts.googleapis.com/css2?family=Bungee&display=swap" rel="stylesheet">
    <!-- JSZip for zipping files (no longer needed, but keeping for consistency) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <!-- Supabase CDN -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js"></script>
    <!-- Shared auth script -->
    <script src="auth.js"></script>
</head>
<body>
    <header>
        <a href="index.html" class="logo">BEB.TOOLS</a>
        <input type="text" placeholder="Search scripts..." class="search-bar" id="search-input" disabled>
        <div class="nav">
            <button id="login-btn">Login with GitHub</button>
            <a href="index.html">Back to Scripts</a>
        </div>
    </header>
    <main>
        <div class="portal-container">
            <h1>Creator Portal</h1>
            <button id="refresh-repos">Refresh Repos</button>
            <div id="login-message">Please log in with GitHub to upload and manage scripts.</div>

            <div class="sections-wrapper">
                <!-- Upload Script Section -->
                <div id="upload-section" class="section-box" style="display: none;">
                    <h2>Upload Script</h2>
                    <p class="instructions">Select a repo and drag your Blender script, ReadMe, and thumbnail into the boxes below to share with the community.</p>
                    <form id="upload-form">
                        <div class="form-row">
                            <label for="repo-select">Select Repository:</label>
                            <select id="repo-select"></select>
                        </div>
                        <div class="form-row">
                            <label class="naming-rule" style="display: none;">Your .py, .txt, and .png should all have the same name.</label>
                            <label for="py-file">Python Script (.py):</label>
                            <div id="py-drop-zone" class="dropzone"></div>
                            <input type="file" id="py-file" accept=".py" required>
                        </div>
                        <div class="form-row">
                            <label for="txt-file">ReadMe (.txt):</label>
                            <div id="txt-drop-zone" class="dropzone"></div>
                            <input type="file" id="txt-file" accept=".txt">
                        </div>
                        <div class="form-row">
                            <label for="png-file">Thumbnail (.png):</label>
                            <div id="png-drop-zone" class="dropzone"></div>
                            <input type="file" id="png-file" accept=".png" required>
                            <p class="guidelines">Recommended: 400x200px, max 100KB</p>
                        </div>
                        <button type="submit">Upload Script</button>
                        <a href="https://github.com/BebTools/Beb.Tools-Scripts" target="_blank" class="example-link">View Examples</a>
                    </form>
                    <div id="upload-status"></div>
                </div>

                <!-- Manage Repositories Section -->
                <div id="repo-section" class="section-box" style="display: none;">
                    <h2>Manage Repositories</h2>
                    <div class="create-repo">
                        <label for="new-repo-name">Create New Repository:</label>
                        <input type="text" id="new-repo-name" placeholder="e.g., MyBebToolsRepo">
                        <button id="create-repo-btn">Create</button>
                    </div>
                    <h3>My Repos</h3>
                    <div class="scrollbox">
                        <ul id="repo-list"></ul>
                    </div>
                    <div id="repo-status"></div>
                </div>

                <!-- Manage Scripts Section -->
                <div id="script-section" class="section-box" style="display: none;">
                    <h2>Manage Scripts</h2>
                    <div class="form-row">
                        <label for="script-repo-select">Select Repository:</label>
                        <select id="script-repo-select"></select>
                    </div>
                    <div class="scrollbox">
                        <ul id="script-list"></ul>
                    </div>
                    <div id="script-status"></div>
                </div>
            </div>
        </div>
    </main>
    <script src="portal.js"></script>
</body>
</html>